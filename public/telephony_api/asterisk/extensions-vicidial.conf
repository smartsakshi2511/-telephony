; WARNING- THIS FILE IS AUTO-GENERATED BY VICIDIAL, ANY EDITS YOU MAKE WILL BE LOST
TRUNKloop = IAX2/ASTloop:nGBQRbURRwMb17S@127.0.0.1:40569
TRUNKblind = IAX2/ASTblind:nGBQRbURRwMb17S@127.0.0.1:41569
TRUNKplay = IAX2/ASTplay:nGBQRbURRwMb17S@127.0.0.1:42569



; 2FA_say_auth_code
[2FA_say_auth_code]
exten => s,1,Answer
exten => s,n,AGI(agi-VDAD_inbound_calltime_check.agi,CALLMENU-----YES-----2FA_say_auth_code-------------------------NO-----YES)
exten => s,n,Set(INVCOUNT=0) 
exten => s,n,Background(sip-silence)
exten => s,n,Background(hello)
exten => s,n,Background(your)
exten => s,n,Background(access-code)
exten => s,n,Background(is)
exten => s,n,AGI(cm_speak_var.agi,say_digits---access_code---DP)
exten => s,n,WaitExten(1)
exten => s,n,Background(sip-silence)
exten => s,n,Background(hello)
exten => s,n,Background(your)
exten => s,n,Background(access-code)
exten => s,n,Background(is)
exten => s,n,AGI(cm_speak_var.agi,say_digits---access_code---DP)
exten => s,n,WaitExten(1)


exten => t,1,Hangup()
exten => i,1,Goto(s,4)
exten => i,n,Hangup()
; hangup
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))


; agent phones restricted to only internal extensions
[default---agent]
exten => s,1,Answer
exten => s,n,AGI(agi-VDAD_inbound_calltime_check.agi,-----NO-----default---agent-------------------------NO-----YES)
exten => s,n,Set(INVCOUNT=0) 
exten => s,n,Background(sip-silence)
exten => s,n,WaitExten(20)


; hangup
exten => t,1,Playback(vm-goodbye)
exten => t,n,Hangup()
exten => i,1,Goto(s,4)
exten => i,n,Hangup()
; hangup
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))

; custom dialplan entries
include => vicidial-auto-internal
include => vicidial-auto-phones




; logging of all outbound calls from agent phones
[defaultlog]
exten => s,1,Answer
exten => s,n,AGI(agi-VDAD_inbound_calltime_check.agi,-----NO-----defaultlog-------------------------NO-----YES)
exten => s,n,Set(INVCOUNT=0) 
exten => s,n,Background(sip-silence)
exten => s,n,WaitExten(20)


; hangup
exten => t,1,Playback(vm-goodbye)
exten => t,n,Hangup()
exten => i,1,Goto(s,4)
exten => i,n,Hangup()
; hangup
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))

; custom dialplan entries
exten => _X.,1,AGI(agi-NVA_recording.agi,BOTH------Y---Y---Y)
exten => _X.,n,Goto(default,${EXTEN},1)




[vicidial-auto-external]
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))

; Local Server: 192.168.125.241
exten => _192*168*125*241*.,1,Goto(default,${EXTEN:16},1)
exten => _192*168*125*241*.,2,Hangup()
exten => _**192*168*125*241*.,1,Goto(default,${EXTEN:18},1)
exten => _**192*168*125*241*.,2,Hangup()

; Agent session audio playback meetme entry
exten => _473782178600XXX,1,Meetme(${EXTEN:8},q)
exten => _473782178600XXX,n,Hangup()
; Agent session audio playback loop
exten => _473782168600XXX,1,Dial(${TRUNKplay}/47378217${EXTEN:8},5,To)
exten => _473782168600XXX,n,Hangup()
; Agent session audio playback extension
exten => 473782158521111,1,Answer
exten => 473782158521111,n,ControlPlayback(${CALLERID(name)},99999,0,1,2,3,4)
exten => 473782158521111,n,Hangup()
; SendDTMF to playback channel to control it
exten => _473782148521111.,1,Answer
exten => _473782148521111.,n,SendDTMF(${CALLERID(num)},250,250,IAX2/ASTplay-${EXTEN:15})
exten => _473782148521111.,n,Hangup()
; Silent wait channel for DTMFsend
exten => 473782138521111,1,Answer
exten => 473782138521111,n,Wait(5)
exten => 473782138521111,n,Hangup()
; Whisper to agent meetme entry
exten => _473782188600XXX,1,Answer
exten => _473782188600XXX,n,Wait(1)
exten => _473782188600XXX,n,AGI(getAGENTchannel.agi)
exten => _473782188600XXX,n,NoOp(${agent_zap_channel})
exten => _473782188600XXX,n,GotoIf($[ "${agent_zap_channel}" = "101" ]?fin)
exten => _473782188600XXX,n,ChanSpy(${agent_zap_channel},qw)
exten => _473782188600XXX,n(fin),Hangup()

; Inbound Answer Config DISABLED
; Unanswered inbound VICIDIAL transfer calls
exten => _98009.,1,Dial(${TRUNKloop}/9${EXTEN},,to)
exten => _98009.,n,Hangup()
exten => _998009.,1,AGI(agi-VDAD_ALL_inbound.agi,CLOSER-----LB-----CL_TESTCAMP-----7275551212-----Closer-----park----------999-----1)
exten => _998009.,n,Hangup()
; Unanswered DID forwarded calls
exten => _99809*.,1,AGI(agi-VDAD_ALL_inbound.agi)
exten => _99809*.,n,Hangup()

[vicidial-auto-internal]
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))
; Voicemail Extensions:
exten => _85026666666666.,1,Wait(1)
exten => _85026666666666.,n,Voicemail(${EXTEN:14},u)
exten => _85026666666666.,n,Hangup()
exten => _85026666666667.,1,Wait(1)
exten => _85026666666667.,n,Voicemail(${EXTEN:14},su)
exten => _85026666666667.,n,Hangup()
exten => 8500,1,VoicemailMain
exten => 8500,2,Goto(s,6)
exten => 8500,3,Hangup()
exten => 8501,1,VoicemailMain(s${CALLERID(num)})
exten => 8501,2,Hangup()

; Prompt Extensions:
exten => 8167,1,Answer
exten => 8167,2,AGI(agi-record_prompts.agi,wav-----720000)
exten => 8167,3,Hangup()
exten => 8168,1,Answer
exten => 8168,2,AGI(agi-record_prompts.agi,gsm-----720000)
exten => 8168,3,Hangup()

; this is used for recording conference calls, the client app sends the filename
;    value as a callerID recordings go to /var/spool/asterisk/monitor (WAV)
;    Recording is limited to 1 hour, to make longer, just change the server
;    setting ViciDial Recording Limit
;     this is the WAV verison, default
exten => 8309,1,Answer
exten => 8309,2,Monitor(wav,${CALLERID(name)})
exten => 8309,3,Wait(3600)
exten => 8309,4,Hangup()
;     this is the GSM verison
exten => 8310,1,Answer
exten => 8310,2,Monitor(gsm,${CALLERID(name)})
exten => 8310,3,Wait(3600)
exten => 8310,4,Hangup()

;     agent alert extension
exten => 83047777777777,1,Answer
exten => 83047777777777,2,Playback(${CALLERID(name)})
exten => 83047777777777,3,Hangup()

;     Playback audio then hangup extension
exten => _83046777777777*.,1,Answer
exten => _83046777777777*.,n,Playback(sip-silence)
exten => _83046777777777*.,n,Playback(sip-silence)
exten => _83046777777777*.,n,Playback(sip-silence)
exten => _83046777777777*.,n,NoOp(Playing ${EXTEN:15})
exten => _83046777777777*.,n,Playback(${EXTEN:15})
exten => _83046777777777*.,n,Playback(silence)
exten => _83046777777777*.,n,Hangup()

; This is a loopback dial-around to allow for immediate answer of outbound calls
exten => _8305888888888888.,1,Answer
exten => _8305888888888888.,n,Wait(${EXTEN:16:1})
exten => _8305888888888888.,n,Dial(${TRUNKloop}/${EXTEN:17},,To)
exten => _8305888888888888.,n,Hangup()
; No-call silence extension
exten => _8305888888888888X999,1,Answer
exten => _8305888888888888X999,n,Wait(3600)
exten => _8305888888888888X999,n,Hangup()
; In-Group Ask-Post-Call Survey AGI
exten => _8306888888888888X999,1,Answer
exten => _8306888888888888X999,n,AGI(agi-ingroup_survey.agi)
exten => _8306888888888888X999,n,Hangup()

[vicidial-auto-phones]
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))

; Phones direct dial extensions:
exten => 0001,1,Dial(SIP/0001,60,)
exten => 0001,2,Goto(default,850266666666660001,1)
exten => 0001,3,Hangup()
exten => 1001,1,Dial(SIP/1001,60,)
exten => 1001,2,Goto(default,850266666666661001,1)
exten => 1001,3,Hangup()
exten => 1002,1,Dial(SIP/1002,60,)
exten => 1002,2,Goto(default,850266666666661002,1)
exten => 1002,3,Hangup()
exten => 1003,1,Dial(SIP/1003,60,)
exten => 1003,2,Goto(default,850266666666661003,1)
exten => 1003,3,Hangup()
exten => 123456,1,Dial(SIP/123456,60,)
exten => 123456,2,Goto(default,85026666666666123456,1)
exten => 123456,3,Hangup()
exten => 2020,1,Dial(SIP/2020,60,)
exten => 2020,2,Goto(default,850266666666662020,1)
exten => 2020,3,Hangup()
exten => 2021,1,Dial(SIP/2021,60,)
exten => 2021,2,Goto(default,850266666666662021,1)
exten => 2021,3,Hangup()
exten => 2022,1,Dial(SIP/2022,60,)
exten => 2022,2,Goto(default,850266666666662022,1)
exten => 2022,3,Hangup()
exten => 3030,1,Dial(SIP/3030,60,)
exten => 3030,2,Goto(default,850266666666663030,1)
exten => 3030,3,Hangup()
exten => 3031,1,Dial(SIP/3031,60,)
exten => 3031,2,Goto(default,850266666666663031,1)
exten => 3031,3,Hangup()
exten => 4040,1,Dial(SIP/4040,60,)
exten => 4040,2,Goto(default,850266666666664040,1)
exten => 4040,3,Hangup()
exten => 4041,1,Dial(SIP/4041,60,)
exten => 4041,2,Goto(default,850266666666664041,1)
exten => 4041,3,Hangup()
exten => 4042,1,Dial(SIP/4042,60,)
exten => 4042,2,Goto(default,850266666666664042,1)
exten => 4042,3,Hangup()
exten => 4049,1,Dial(SIP/4049,60,)
exten => 4049,2,Goto(default,850266666666664049,1)
exten => 4049,3,Hangup()
exten => 4050,1,Dial(SIP/4050,60,)
exten => 4050,2,Goto(default,850266666666664050,1)
exten => 4050,3,Hangup()
exten => 4323,1,Dial(SIP/4323,60,)
exten => 4323,2,Goto(default,850266666666664323,1)
exten => 4323,3,Hangup()
exten => 45001,1,Dial(SIP/45001,60,)
exten => 45001,2,Goto(default,8502666666666645001,1)
exten => 45001,3,Hangup()
exten => 45002,1,Dial(SIP/45002,60,)
exten => 45002,2,Goto(default,8502666666666645002,1)
exten => 45002,3,Hangup()
exten => 45010,1,Dial(SIP/45010,60,)
exten => 45010,2,Goto(default,8502666666666645010,1)
exten => 45010,3,Hangup()
exten => 5555,1,Dial(SIP/5555,60,)
exten => 5555,2,Goto(default,850266666666665555,1)
exten => 5555,3,Hangup()
exten => 6060,1,Dial(SIP/6060,60,)
exten => 6060,2,Goto(default,850266666666666060,1)
exten => 6060,3,Hangup()
exten => 6061,1,Dial(SIP/6061,60,)
exten => 6061,2,Goto(default,850266666666666061,1)
exten => 6061,3,Hangup()
exten => 6062,1,Dial(SIP/6062,60,)
exten => 6062,2,Goto(default,850266666666666062,1)
exten => 6062,3,Hangup()
exten => 6868,1,Dial(SIP/6868,60,)
exten => 6868,2,Goto(default,850266666666666868,1)
exten => 6868,3,Hangup()
exten => 7070,1,Dial(SIP/7070,60,)
exten => 7070,2,Goto(default,850266666666667070,1)
exten => 7070,3,Hangup()
exten => 7071,1,Dial(SIP/7071,60,)
exten => 7071,2,Goto(default,850266666666667071,1)
exten => 7071,3,Hangup()
exten => 7484,1,Dial(SIP/7484,60,)
exten => 7484,2,Goto(default,850266666666667484,1)
exten => 7484,3,Hangup()
exten => 7575,1,Dial(SIP/7575,60,)
exten => 7575,2,Goto(default,850266666666667575,1)
exten => 7575,3,Hangup()
exten => 7576,1,Dial(SIP/7576,60,)
exten => 7576,2,Goto(default,850266666666667576,1)
exten => 7576,3,Hangup()
exten => 7577,1,Dial(SIP/7577,60,)
exten => 7577,2,Goto(default,850266666666667577,1)
exten => 7577,3,Hangup()
exten => 7578,1,Dial(SIP/7578,60,)
exten => 7578,2,Goto(default,850266666666667578,1)
exten => 7578,3,Hangup()
exten => 7579,1,Dial(SIP/7579,60,)
exten => 7579,2,Goto(default,850266666666667579,1)
exten => 7579,3,Hangup()
exten => 7801,1,Dial(SIP/7801,60,)
exten => 7801,2,Goto(default,850266666666667801,1)
exten => 7801,3,Hangup()
exten => 7802,1,Dial(SIP/7802,60,)
exten => 7802,2,Goto(default,850266666666667802,1)
exten => 7802,3,Hangup()
exten => 7803,1,Dial(SIP/7803,60,)
exten => 7803,2,Goto(default,850266666666667803,1)
exten => 7803,3,Hangup()
exten => 7804,1,Dial(SIP/7804,60,)
exten => 7804,2,Goto(default,850266666666667804,1)
exten => 7804,3,Hangup()
exten => 7805,1,Dial(SIP/7805,60,)
exten => 7805,2,Goto(default,850266666666667805,1)
exten => 7805,3,Hangup()
exten => 8011,1,Dial(SIP/8011,60,)
exten => 8011,2,Goto(default,850266666666668011,1)
exten => 8011,3,Hangup()
exten => 8080,1,Dial(SIP/8080,60,)
exten => 8080,2,Goto(default,850266666666668080,1)
exten => 8080,3,Hangup()
exten => 8081,1,Dial(SIP/8081,60,)
exten => 8081,2,Goto(default,850266666666668081,1)
exten => 8081,3,Hangup()
exten => 8082,1,Dial(SIP/8082,60,)
exten => 8082,2,Goto(default,850266666666668082,1)
exten => 8082,3,Hangup()
exten => 8083,1,Dial(SIP/8083,60,)
exten => 8083,2,Goto(default,850266666666668083,1)
exten => 8083,3,Hangup()
exten => 8084,1,Dial(SIP/8084,60,)
exten => 8084,2,Goto(default,850266666666668084,1)
exten => 8084,3,Hangup()
exten => 8085,1,Dial(SIP/8085,60,)
exten => 8085,2,Goto(default,850266666666668085,1)
exten => 8085,3,Hangup()
exten => 8086,1,Dial(SIP/8086,60,)
exten => 8086,2,Goto(default,850266666666668086,1)
exten => 8086,3,Hangup()
exten => 8087,1,Dial(SIP/8087,60,)
exten => 8087,2,Goto(default,850266666666668087,1)
exten => 8087,3,Hangup()
exten => 8088,1,Dial(SIP/8088,60,)
exten => 8088,2,Goto(default,850266666666668088,1)
exten => 8088,3,Hangup()
exten => 8089,1,Dial(SIP/8089,60,)
exten => 8089,2,Goto(default,850266666666668089,1)
exten => 8089,3,Hangup()
exten => 8090,1,Dial(SIP/8090,60,)
exten => 8090,2,Goto(default,850266666666668090,1)
exten => 8090,3,Hangup()
exten => 8091,1,Dial(SIP/8091,60,)
exten => 8091,2,Goto(default,850266666666668091,1)
exten => 8091,3,Hangup()
exten => 8092,1,Dial(SIP/8092,60,)
exten => 8092,2,Goto(default,850266666666668092,1)
exten => 8092,3,Hangup()
exten => 8093,1,Dial(SIP/8093,60,)
exten => 8093,2,Goto(default,850266666666668093,1)
exten => 8093,3,Hangup()
exten => 8094,1,Dial(SIP/8094,60,)
exten => 8094,2,Goto(default,850266666666668094,1)
exten => 8094,3,Hangup()
exten => 8095,1,Dial(SIP/8095,60,)
exten => 8095,2,Goto(default,850266666666668095,1)
exten => 8095,3,Hangup()
exten => 8096,1,Dial(SIP/8096,60,)
exten => 8096,2,Goto(default,850266666666668096,1)
exten => 8096,3,Hangup()
exten => 9090,1,Dial(SIP/9090,60,)
exten => 9090,2,Goto(default,850266666666669090,1)
exten => 9090,3,Hangup()
exten => 9091,1,Dial(SIP/9091,60,)
exten => 9091,2,Goto(default,850266666666669091,1)
exten => 9091,3,Hangup()
exten => 9595,1,Dial(SIP/9595,60,)
exten => 9595,2,Goto(default,850266666666669595,1)
exten => 9595,3,Hangup()
exten => 9596,1,Dial(SIP/9596,60,)
exten => 9596,2,Goto(default,850266666666669596,1)
exten => 9596,3,Hangup()
exten => 9990,1,Dial(SIP/9990,60,)
exten => 9990,2,Goto(default,850266666666669990,1)
exten => 9990,3,Hangup()
exten => 9991,1,Dial(SIP/9991,60,)
exten => 9991,2,Goto(default,850266666666669991,1)
exten => 9991,3,Hangup()
exten => 9999,1,Dial(SIP/9999,60,)
exten => 9999,2,Goto(default,850266666666669999,1)
exten => 9999,3,Hangup()
exten => 102,1,Dial(SIP/gs102,60,)
exten => 102,2,Goto(default,85026666666666102,1)
exten => 102,3,Hangup()

[vicidial-auto]
exten => h,1,AGI(agi://127.0.0.1:4577/call_log--HVcauses--PRI-----NODEBUG-----${HANGUPCAUSE}-----${DIALSTATUS}-----${DIALEDTIME}-----${ANSWEREDTIME}-----${HANGUPCAUSE(${HANGUPCAUSE_KEYS()},tech)}))

include => vicidial-auto-internal
include => vicidial-auto-phones
include => vicidial-auto-external


; END OF FILE    Last Forced System Reload: 2023-12-08 20:39:00
